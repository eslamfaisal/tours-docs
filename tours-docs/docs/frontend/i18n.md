# Internationalization (i18n)

## Overview

The platform supports three languages with full RTL support for Arabic:

- ðŸ‡¬ðŸ‡§ English (en) â€” Default
- ðŸ‡ªðŸ‡¸ Spanish (es)
- ðŸ‡ªðŸ‡¬ Arabic (ar) â€” RTL

---

## Implementation Stack

| Component | Solution |
|-----------|----------|
| Routing | Next.js App Router with `[locale]` |
| Translations | `next-intl` / `i18next` |
| Date/Time | `Intl.DateTimeFormat` |
| Numbers | `Intl.NumberFormat` |
| RTL | CSS logical properties + `dir="rtl"` |

---

## File Structure

```
locales/
â”œâ”€â”€ en/
â”‚   â”œâ”€â”€ common.json        # Shared translations
â”‚   â”œâ”€â”€ home.json          # Home page
â”‚   â”œâ”€â”€ trips.json         # Trip-related
â”‚   â”œâ”€â”€ booking.json       # Booking flow
â”‚   â”œâ”€â”€ auth.json          # Authentication
â”‚   â”œâ”€â”€ account.json       # Customer portal
â”‚   â””â”€â”€ errors.json        # Error messages
â”œâ”€â”€ es/
â”‚   â””â”€â”€ ... (same structure)
â””â”€â”€ ar/
    â””â”€â”€ ... (same structure)
```

---

## Translation Files

### English Example

```json
// locales/en/common.json
{
  "nav": {
    "home": "Home",
    "trips": "Tours",
    "destinations": "Destinations",
    "blog": "Blog",
    "contact": "Contact"
  },
  "actions": {
    "search": "Search",
    "book": "Book Now",
    "viewDetails": "View Details",
    "addToWishlist": "Add to Wishlist",
    "login": "Login",
    "register": "Sign Up"
  },
  "footer": {
    "copyright": "Â© {{year}} Egypt Tours. All rights reserved."
  }
}

// locales/en/trips.json
{
  "title": "Egypt Tours",
  "filters": {
    "destination": "Destination",
    "duration": "Duration",
    "priceRange": "Price Range",
    "rating": "Rating"
  },
  "card": {
    "from": "From",
    "perPerson": "per person",
    "days": "{{count}} day",
    "days_plural": "{{count}} days",
    "reviews": "{{count}} review",
    "reviews_plural": "{{count}} reviews"
  },
  "details": {
    "itinerary": "Itinerary",
    "included": "What's Included",
    "excluded": "What's Excluded",
    "gallery": "Gallery",
    "reviews": "Reviews"
  }
}
```

### Arabic Example

```json
// locales/ar/common.json
{
  "nav": {
    "home": "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
    "trips": "Ø§Ù„Ø±Ø­Ù„Ø§Øª",
    "destinations": "Ø§Ù„ÙˆØ¬Ù‡Ø§Øª",
    "blog": "Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©",
    "contact": "Ø§ØªØµÙ„ Ø¨Ù†Ø§"
  },
  "actions": {
    "search": "Ø¨Ø­Ø«",
    "book": "Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†",
    "viewDetails": "Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„",
    "addToWishlist": "Ø£Ø¶Ù Ù„Ù„Ù…ÙØ¶Ù„Ø©",
    "login": "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",
    "register": "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨"
  }
}
```

---

## Configuration

```typescript
// lib/i18n.ts
import { getRequestConfig } from 'next-intl/server';

export const locales = ['en', 'es', 'ar'] as const;
export type Locale = (typeof locales)[number];

export const rtlLocales: Locale[] = ['ar'];

export default getRequestConfig(async ({ locale }) => ({
  messages: (await import(`../locales/${locale}/common.json`)).default,
}));
```

---

## Usage in Components

```tsx
// Using translations
import { useTranslations } from 'next-intl';

export function TripCard({ trip }) {
  const t = useTranslations('trips.card');
  
  return (
    <Card>
      <h3>{trip.title}</h3>
      <p>{t('days', { count: trip.duration })}</p>
      <p>{t('from')} ${trip.price} {t('perPerson')}</p>
    </Card>
  );
}
```

---

## RTL Support

### CSS Approach

```css
/* Use logical properties for RTL compatibility */
.card {
  margin-inline-start: 1rem;  /* margin-left in LTR, margin-right in RTL */
  padding-inline-end: 2rem;   /* padding-right in LTR, padding-left in RTL */
  text-align: start;          /* left in LTR, right in RTL */
}

/* Direction-aware flexbox */
.nav {
  display: flex;
  flex-direction: row;        /* Automatically reverses in RTL */
}

/* Specific RTL overrides */
[dir="rtl"] .icon-arrow {
  transform: scaleX(-1);      /* Flip arrows */
}
```

### Layout Component

```tsx
// app/[locale]/layout.tsx
import { rtlLocales } from '@/lib/i18n';

export default function LocaleLayout({
  children,
  params: { locale },
}: {
  children: React.ReactNode;
  params: { locale: string };
}) {
  const dir = rtlLocales.includes(locale) ? 'rtl' : 'ltr';
  
  return (
    <html lang={locale} dir={dir}>
      <body className={dir === 'rtl' ? 'font-arabic' : 'font-default'}>
        {children}
      </body>
    </html>
  );
}
```

---

## Date & Number Formatting

```typescript
// lib/formatters.ts
export function formatDate(date: Date, locale: string): string {
  return new Intl.DateTimeFormat(locale, {
    dateStyle: 'long',
  }).format(date);
}

export function formatPrice(amount: number, locale: string, currency = 'USD'): string {
  return new Intl.NumberFormat(locale, {
    style: 'currency',
    currency,
  }).format(amount);
}

// Usage
formatDate(new Date(), 'ar');  // "Ù¢ ÙØ¨Ø±Ø§ÙŠØ± Ù¢Ù Ù¢Ù¦"
formatPrice(599, 'ar', 'USD'); // "Ù¥Ù©Ù©Ù«Ù Ù  US$"
```

---

## Language Switcher

```tsx
'use client';

import { usePathname, useRouter } from 'next/navigation';
import { locales } from '@/lib/i18n';

const localeNames = {
  en: 'English',
  es: 'EspaÃ±ol',
  ar: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
};

export function LanguageSwitcher() {
  const router = useRouter();
  const pathname = usePathname();
  const currentLocale = pathname.split('/')[1];

  const switchLocale = (newLocale: string) => {
    const newPath = pathname.replace(`/${currentLocale}`, `/${newLocale}`);
    router.push(newPath);
  };

  return (
    <select
      value={currentLocale}
      onChange={(e) => switchLocale(e.target.value)}
    >
      {locales.map((locale) => (
        <option key={locale} value={locale}>
          {localeNames[locale]}
        </option>
      ))}
    </select>
  );
}
```

---

## SEO for Localized Content

```tsx
// app/[locale]/trips/[slug]/page.tsx
export async function generateMetadata({ params }) {
  const { locale, slug } = params;
  const trip = await getTrip(slug, locale);
  
  return {
    title: trip.title,
    description: trip.description,
    alternates: {
      canonical: `/${locale}/trips/${slug}`,
      languages: {
        en: `/en/trips/${slug}`,
        es: `/es/trips/${slug}`,
        ar: `/ar/trips/${slug}`,
      },
    },
  };
}
```
